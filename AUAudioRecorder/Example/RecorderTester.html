<!DOCTYPE html>
<html>
	<head>
		<title>AUAudioRecorder Tester</title>
	</head>
	
	<body>
		<button id="permissionid">Get Permission</button>
		<button id="record">Record</button>
		<button id="stopRecord">Stop Record</button>
        <button id="loop">Loop</button>
		<button id="play">Play</button>
		<button id="pause">Pause</button>
		<button id="stop">Stop</button>
		<button id="stepBack">Step Back</button>
		<button id="stepForward">Step Forward</button>
		<button id="clear">Clear</button>
		<button id="finished">Check Finished</button>
		<button id="retrieve">Retrieve Audio</button>

		<script type="text/javascript" src="https://adeolauthman.squarespace.com/s/AUAudioRecorder.js"></script>
        <!-- <script type="text/javascript" src="../src/AUAudioRecorder.js"></script> -->
	</body>




	<script type="text/javascript">
		var permissionBtn = document.getElementById("permissionid");
		var recordBtn = document.getElementById("record");
		var stopRecordBtn = document.getElementById("stopRecord");
        var loopBtn = document.getElementById('loop');
		var playBtn = document.getElementById("play");
		var pauseBtn = document.getElementById("pause");
		var stopBtn = document.getElementById("stop");
		var stepBackBtn = document.getElementById("stepBack");
		var stepForBtn = document.getElementById("stepForward");
		var clearBtn = document.getElementById("clear");
		var finishedBtn = document.getElementById("finished");
		var retrieveBtn = document.getElementById("retrieve");

		var audioRec = new AUAudioRecorder();

		permissionBtn.onclick = function() {
			if(audioRec.hasPermission() == false) {
				audioRec.requestPermission();
			}
		}
		recordBtn.onclick = function() {
			audioRec.startRecording((errMessage) => {
				console.log(errMessage);
			});
		}
		stopRecordBtn.onclick = function() {
			audioRec.stopRecording((errMessage) => {
				console.log(errMessage);
			});
		}
        loopBtn.onclick = function() {
            audioRec.loop(true);
        }
		playBtn.onclick = function() {
			/* Either one could be used to play the audio. getRecording() just returns an audio object. */

			audioRec.play( (errMessage) => {
				console.log(errMessage);
			});
            console.log( "Is Playing: " + audioRec.isPlaying() );
			// var myRecording = audioRec.getRecording();
			// myRecording.play();
		}
		pauseBtn.onclick = function() {
			audioRec.pause( (errMessage) => {
				console.log(errMessage);
			});
		}
		stopBtn.onclick = function() {
			audioRec.stop( (errMessage) => {
				console.log(errMessage);
			});
		}
		stepBackBtn.onclick = function() {
			audioRec.stepBackward( (errMessage) => {
				console.log(errMessage);
			});
		}
		stepForBtn.onclick = function() {
			audioRec.stepForward( (errMessage) => {
				console.log(errMessage);
			});
		}
		clearBtn.onclick = function() {
			audioRec.clear();
		}
		finishedBtn.onclick = function() {
			console.log(audioRec.isFinished());
		}
		retrieveBtn.onclick = function() {
			console.log( audioRec.getRecording() );
			console.log( audioRec.getRecordingFile() );
		}

		


	</script>

</html>